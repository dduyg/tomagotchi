<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LiminalLoop</title>
  <style>
    @font-face {
      font-family: "Iskry";
      src: url("https://cdn.jsdelivr.net/gh/dduyg/LiminalLoop@main/fonts/Iskry-Regular.woff2") format("woff2");
      font-weight: 400;
      font-style: normal;
    }
    @font-face {
      font-family: "Iskry";
      src: url("https://cdn.jsdelivr.net/gh/dduyg/LiminalLoop@main/fonts/Iskry-Bold.woff2") format("woff2");
      font-weight: 700;
      font-style: normal;
    }
    @font-face {
      font-family: "ArgakaFashion";
      src: url("https://cdn.jsdelivr.net/gh/dduyg/LiminalLoop@main/fonts/ArgakaFashion-Regular.woff2") format("woff2");
      font-weight: normal;
      font-style: normal;
    }
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      width: 100vw;
      height: 100vh;
      font-family: "Iskry", sans-serif;
      color: #5a5a5a;
      background-color: #F7ECE1;
      background-image: radial-gradient(circle farthest-corner at 100% 100%, #EB6666, hsla(0, 0%, 100%, 0) 50%);
      position: relative;
    }
    .content {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none; /* allows gallery to scroll */
      z-index: 1;
   
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      text-align: center;
      padding-bottom: 15vh;
    }
    header { padding: 10px 10%; }
    header img { width: 100%; }
    nav {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      font-size: 1.3rem;
      font-family: "ArgakaFashion", sans-serif;
    }
    .desc {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: 600px;
      line-height: 1.6;
      padding: 0 5vw 5%;
      font-size: 1.2rem;
    }
    footer {
      font-size: 6vw;
      font-family: "ArgakaFashion", sans-serif;
      letter-spacing: 0.01em;
      transform: rotate(180deg);
    }
    /* Gallery styles */
    aside {
      position: absolute;
      left: 0; right: 0; top: 0; bottom: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: 10;
      pointer-events: all;
    }
    .scroll {
      position: absolute;
      left: 0; right: 0;
      top: 0; bottom: 0;
      width: 100vw;
      height: 100vh;
      overflow-y: scroll;
      overflow-x: hidden;
      pointer-events: all;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    .scroll::-webkit-scrollbar { display: none; }
    .gallery {
      position: relative;
      width: 100vw;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding-top: 160px;
      padding-bottom: 40vh;
      gap: 70px;
      z-index: 11;
    }
    .video {
      opacity: 0;
      transition: opacity 1.2s ease;
      width: 60vw;
      height: 34vw; /* Keeps 16:9 aspect ratio */
      overflow: hidden;
    }
    .video.visible {
      opacity: 1;
    }
    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    @media (max-width: 800px) {
      footer { font-size: 14vw; }
    }
  </style>
</head>
<body>
  <div class="content">
    <header>
      <nav>
        <div style="text-align:left;">Alchemy</div>
        <div>of</div>
        <div style="text-align:right;">Souls</div>
      </nav>
      <img src="https://cdn.jsdelivr.net/gh/dduyg/LiminalLoop@shelf/06/popeye.png">
    </header>
    <div class="desc">
      It's about how many notes you take
      that actually matter to you, and how
      many you turn into action. Real growth
      starts when you grab the idea, deconstruct
      it on the page, and make it work in your world.
    </div>
    <footer>BETTER</footer>
  </div>

  <aside>
    <div class="scroll">
      <div class="gallery">
        <div class="video"><div id="player1"></div></div>
        <div class="video"><div id="player2"></div></div>
        <div class="video"><div id="player3"></div></div>
        <div class="video"><div id="player4"></div></div>
      </div>
    </div>
  </aside>

  <!-- YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let players = [];

    // Create YouTube players when API is ready
    function onYouTubeIframeAPIReady() {
      const videoIds = ["NYv7HsBr9aM", "GNxBn2CH-vQ", "lJGuXm-vkEk", "XH1EXDHVG9s"];
      videoIds.forEach((id, index) => {
        const player = new YT.Player(`player${index + 1}`, {
          videoId: id,
          playerVars: {
            autoplay: 0,
            mute: 1,
            controls: 0,
            modestbranding: 1,
            rel: 0,
            showinfo: 0,
          }
        });
        players.push(player);
      });
    }

    // Fade-in + autoplay on scroll
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const container = entry.target;
        const index = [...container.parentNode.children].indexOf(container);
        const player = players[index];

        if (entry.isIntersecting) {
          container.classList.add("visible");
          if (player && player.playVideo) player.playVideo();
        } else {
          container.classList.remove("visible");
          if (player && player.pauseVideo) player.pauseVideo();
        }
      });
    }, { threshold: 0.5 });

    // Observe all videos
    window.addEventListener("load", () => {
      document.querySelectorAll(".video").forEach(v => observer.observe(v));
    });
  </script>
</body>
</html>
