<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scroll-Based Saturation</title>
<style>
body {
    height: 200vh; /* Make page scrollable */
    margin: 0;
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: start;
}

.box {
    width: 200px;
    height: 200px;
    margin: 100px 0;
    background-image: url('https://via.placeholder.com/200');
    background-size: cover;
    border-radius: 10px;
    transition: filter 0.1s;
    text-align: center;
    line-height: 200px;
    font-weight: bold;
    color: white;
    font-size: 24px;
}
</style>
</head>
<body>

<div class="box" data-start-saturate="50">Box 1</div>
<div class="box" data-start-saturate="25">Box 2</div>
<div class="box" data-start-saturate="0">Box 3</div>

<script>
// Function to update saturation based on scroll
function updateSaturation() {
    const boxes = document.querySelectorAll('.box');
    const windowHeight = window.innerHeight;

    boxes.forEach(box => {
        const rect = box.getBoundingClientRect();
        const startSaturate = parseFloat(box.dataset.startSaturate);
        const endSaturate = 100;

        // Calculate how visible the element is
        let visibleRatio = 1 - (rect.top / windowHeight);
        visibleRatio = Math.min(Math.max(visibleRatio, 0), 1); // clamp between 0 and 1

        // Map visibleRatio to 0% -> 32% scroll like your keyframes
        let saturation;
        if (visibleRatio < 0.32) {
            saturation = startSaturate + ((endSaturate - startSaturate) * (visibleRatio / 0.32));
        } else {
            saturation = endSaturate;
        }

        box.style.filter = `saturate(${saturation}%)`;
    });
}

// Initial update
updateSaturation();

// Update on scroll
window.addEventListener('scroll', updateSaturation);
window.addEventListener('resize', updateSaturation);
</script>

</body>
</html>
